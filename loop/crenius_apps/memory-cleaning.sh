#!/bin/bash

# سكريبت لتنظيف الحزم الغير مستخدمة والملفات المؤقتة على أوبونتو

# التأكد من أن المستخدم لديه صلاحيات الروت
if [ "$EUID" -ne 0 ]; then
  echo "يرجى تشغيل السكريبت كـ root باستخدام sudo"
  exit 1
fi

echo "بدء عملية التنظيف..."

# 1. تحديث قائمة الحزم
echo "تحديث قائمة الحزم..."
apt update

# 2. إزالة الحزم الغير مستخدمة (الحزم التي تم تثبيتها كتبعيات ولم تعد مطلوبة)
echo "إزالة الحزم الغير مستخدمة..."
apt autoremove -y

# 3. تنظيف ذاكرة التخزين المؤقت للحزم
echo "تنظيف ذاكرة التخزين المؤقت للحزم..."
apt autoclean -y
apt clean -y

# 4. حذف الملفات المؤقتة من المجلدات الشائعة
echo "حذف الملفات المؤقتة..."
rm -rf /tmp/*
rm -rf /var/tmp/*

# 5. تنظيف ذاكرة التخزين المؤقت لـ journal logs
echo "تنظيف سجلات النظام (journal logs)..."
journalctl --vacuum-time=7d

# 6. حذف ذاكرة التخزين المؤقت للمستخدم (اختياري، لكل مستخدم)
echo "تنظيف ذاكرة التخزين المؤقت للمستخدمين..."
find /home/*/.cache/ -type f -atime +30 -delete

# 7. عرض المساحة المحررة
echo "عرض المساحة المحررة..."
df -h /

echo "اكتمل التنظيف بنجاح!"
